<ms-page-title title="Réinitialisation de mot de passe" />
@if (vm$ | async; as vm) {
  <div class="row justify-content-md-center">
    <div class="col col-md-6 col-lg-4">
      <h1 class="fs-4">Demande de réinitialisation de mot de passe</h1>

      @if (vm.emailSent) {
        <div class="alert alert-success">
          Un email t'a été envoyé.<br />
          Consulte ta boîte aux lettres et suis les instructions.
          <div class="alert alert-warning mt-2">
            <ms-icon [icon]="icons.warning" class="me-1" />
            Il arrive que l'email tombe dans les spams. Pense à vérifier s'il s'y trouve.
          </div>
        </div>
      } @else {
        <form [formGroup]="form" (ngSubmit)="sendEmail()">
          <div class="mb-3">
            <label for="email" class="form-label">Adresse email</label>
            <input formControlName="email" type="email" class="form-control" id="email" />
            <val-errors controlName="email" label="L'adresse email" />
          </div>
          <button class="btn btn-primary">Réinitialiser le mot de passe</button>
          @if (vm.error) {
            <div class="text-danger">
              La demande de réinitialisation a échoué.<br />
              Vérifie que tu as utilisé la bonne adresse email.
            </div>
          }
        </form>
      }
    </div>
  </div>
}
