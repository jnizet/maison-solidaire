<ms-page-title title="Réinitialisation de mot de passe" />
<div class="row justify-content-md-center" *ngIf="vm$ | async as vm">
  <div class="col col-md-6 col-lg-4">
    <h1 class="fs-4">Demande de réinitialisation de mot de passe</h1>

    <div *ngIf="vm.emailSent" class="alert alert-success">
      Un email t'a été envoyé.<br />
      Consulte ta boîte aux lettres et suis les instructions.
      <div class="alert alert-warning mt-2">
        <ms-icon [icon]="icons.warning" class="me-1" />
        Il arrive que l'email tombe dans les spams. Pense à vérifier s'il s'y trouve.
      </div>
    </div>
    <ng-container *ngIf="!vm.emailSent">
      <form [formGroup]="form" (ngSubmit)="sendEmail()">
        <div class="mb-3">
          <label for="email" class="form-label">Adresse email</label>
          <input formControlName="email" type="email" class="form-control" id="email" />
          <val-errors controlName="email" label="L'adresse email" />
        </div>
        <button class="btn btn-primary">Réinitialiser le mot de passe</button>
        <div *ngIf="vm.error" class="text-danger">
          La demande de réinitialisation a échoué.<br />
          Vérifie que tu as utilisé la bonne adresse email.
        </div>
      </form>
    </ng-container>
  </div>
</div>
