<ms-page-title title="Choix du mot de passe" />
@if (vm$ | async; as vm) {
  <div class="row justify-content-md-center">
    <div class="col col-md-6 col-lg-4">
      <h1 class="fs-4">Choix du mot de passe</h1>
      @if (vm.verificationError) {
        <div class="text-danger">
          Le lien de choix du mot de passe n'est plus valide.<br />
          Merci de refaire une demande de réinitialisation de mot de passe.
        </div>
      }
      @if (!vm.verificationError && vm.email) {
        <form [formGroup]="form" (ngSubmit)="resetPassword(vm)">
          <p>Tu vas réinitialiser le mot de passe de l'utilisateur {{ vm.email }}.</p>
          <div class="mb-3">
            <label for="password" class="form-label">Mot de passe</label>
            <input formControlName="password" type="password" class="form-control" id="password" />
            <val-errors controlName="password" label="Le mot de passe" />
          </div>

          <div class="row align-items-center">
            <div class="col-sm-auto">
              <button class="btn btn-primary">Choisir ce mot de passe</button>
            </div>
            @if (vm.resetError) {
              <div class="col-sm">
                <div class="text-danger">Une erreur s'est produite à la réinitialisation.</div>
              </div>
            }
          </div>
        </form>
      }
    </div>
  </div>
}
